# 第一章评分标准：限界上下文设计

> **满分**：100 分
> **及格分**：60 分
> **优秀线**：80 分
> **对应章节**：chapter-01-bounded-context.md
> **对应原则**：bounded-context.md

---

## 评分维度

| 维度 | 权重 | 评分要点 |
|------|------|---------|
| 业务能力分析 | 30 分 | 能力识别、MECE 分解、能力分组、团队映射 |
| 限界上下文划分 | 40 分 | 上下文识别、边界定义、命名规范 |
| 上下文映射 | 30 分 | 映射模式选择、防腐层设计、集成方式 |

---

## 一、业务能力分析（30 分）

### 1.1 能力识别（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：所有能力使用"动词+名词"格式，语义清晰，无遗漏
- 良好（80-89分）：90%以上能力使用正确格式，语义基本清晰
- 及格（60-79分）：70%以上能力使用正确格式，有少量遗漏
- 不及格（<60分）：低于70%能力使用正确格式或遗漏严重

**检查项**：
- [ ] 能力格式正确（5分）：使用"动词+名词"格式（如"管理会员订阅"、"发放点券"）
- [ ] 能力完整性（3分）：覆盖 PRD 中所有核心业务能力
- [ ] 能力语义清晰（2分）：能力名称能清晰表达业务含义

**扣分项**：
- 能力格式错误：每个扣 1 分
- 能力缺失：每个核心能力缺失扣 2 分
- 语义模糊：能力名称无法理解扣 1 分/个

---

### 1.2 能力分解 MECE 原则（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：完全遵循 MECE 原则，相互独立且完全穷尽
- 良好（80-89分）：基本遵循 MECE 原则，少量重叠或遗漏
- 及格（60-79分）：部分遵循 MECE 原则，有明显改进空间
- 不及格（<60分）：未遵循 MECE 原则

**检查项**：
- [ ] 相互独立（3分）：能力之间不重叠
- [ ] 完全穷尽（3分）：覆盖所有业务功能
- [ ] 可独立交付（2分）：一个能力可独立开发和部署
- [ ] 单一职责（2分）：一个能力只做一件事

**扣分项**：
- 能力重叠：每处重叠扣 2 分
- 能力遗漏：每处遗漏扣 2 分
- 职责不清：能力职责不明确扣 1 分/个

---

### 1.3 能力分组与团队映射（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：分组合理，团队映射清晰，符合康威定律
- 良好（80-89分）：分组基本合理，团队映射基本清晰
- 及格（60-79分）：分组有部分不合理，团队映射有部分缺失
- 不及格（<60分）：分组混乱或团队映射严重缺失

**检查项**：
- [ ] 按业务领域分组（3分）：用户域、会员域、支付域等
- [ ] 按数据所有权分组（2分）：拥有相同数据的能力归为一组
- [ ] 团队映射明确（3分）：每个能力组都有明确的负责团队
- [ ] 团队规模合理（2分）：团队规模 3-7 人

**扣分项**：
- 分组不合理：分组逻辑混乱扣 3 分
- 团队映射缺失：能力组没有负责团队扣 2 分/个
- 团队规模不合理：团队规模过大或过小扣 1 分/个

---

## 二、限界上下文划分（40 分）

### 2.1 上下文边界识别（15 分）

**满分**：15 分

**评分标准**：
- 优秀（90-100分）：上下文边界清晰，职责明确，验证问题都通过
- 良好（80-89分）：上下文边界基本清晰，职责基本明确
- 及格（60-79分）：上下文边界有部分模糊，职责有部分重叠
- 不及格（<60分）：上下文边界混乱，职责严重重叠

**检查项**：
- [ ] 语言一致性（3分）：上下文内术语统一
- [ ] 数据所有权（4分）：一个数据只有一个所有者
- [ ] 独立变更（4分）：可独立修改和部署
- [ ] 事务边界（4分）：强一致性在上下文内

**验证问题**：
1. "会员"在这里的含义一致吗？
2. "会员数据"归谁所有？
3. 改这个上下文不影响其他？
4. 事务能在这个边界内完成？

**扣分项**：
- 语言不一致：上下文内术语不统一扣 2 分
- 数据所有权冲突：一个数据多个所有者扣 3 分
- 无法独立变更：上下文耦合严重扣 3 分
- 事务跨边界：强一致性跨上下文扣 3 分

---

### 2.2 上下文识别与命名（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：从能力组正确推导上下文，命名完全符合规范
- 良好（80-89分）：从能力组基本正确推导上下文，命名基本符合规范
- 及格（60-79分）：上下文识别有部分错误，命名有部分不规范
- 不及格（<60分）：上下文识别错误或命名严重不规范

**检查项**：
- [ ] 从能力组推导（5分）：每个上下文对应一个或多个相关能力组
- [ ] 命名符合规范（5分）：使用"核心领域 + Context"格式

**命名规范**：
- ✅ Membership Context、Coupon Context、Payment Context
- ❌ Member Context（不够明确）、Coupon Service（是服务不是上下文）

**扣分项**：
- 上下文与能力不匹配：扣 3 分/处
- 命名不规范：扣 2 分/个

---

### 2.3 上下文数量与类型（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：数量适中（3-8个），类型标注正确，投入策略匹配
- 良好（80-89分）：数量基本适中，类型基本正确
- 及格（60-79分）：数量有偏差，类型有部分错误
- 不及格（<60分）：数量严重不合理或类型标注严重错误

**检查项**：
- [ ] 数量合理（5分）：上下文数量 3-8 个
  - 3-8 个：5 分
  - 9-10 个：3 分
  - < 3 或 > 10：0 分
- [ ] 领域类型正确（5分）：核心域/支撑域/通用域/泛化域分类正确

**领域类型说明**：
- 核心域：竞争力所在，差异化（80% 精力）
- 支撑域：必要但非差异化（够用就好）
- 通用域：可直接采购/外包（直接购买）
- 泛化域：无特殊规则（最小投入）

**扣分项**：
- 数量不合理：上下文数量过多或过少扣 5 分
- 类型标注错误：核心域误判为支撑域扣 3 分/个
- 投入策略不匹配：核心域投入不足扣 2 分/个

---

### 2.4 康威定律应用（5 分）

**满分**：5 分

**评分标准**：
- 优秀（90-100分）：完全遵循康威定律，系统能力边界 = 团队边界
- 良好（80-89分）：基本遵循康威定律，有少量偏差
- 及格（60-79分）：部分遵循康威定律，有明显改进空间
- 不及格（<60分）：未遵循康威定律

**检查项**：
- [ ] 能力边界 = 团队边界（3分）：一个能力边界对应一个团队
- [ ] 沟通模式 = 集成模式（2分）：团队沟通方式反映在系统架构上

**扣分项**：
- 能力团队不匹配：能力边界与团队边界不一致扣 2 分/处
- 沟通模式未反映：团队沟通模式未在架构中体现扣 1 分/处

---

## 三、上下文映射（30 分）

### 3.1 映射模式选择（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：映射模式选择完全正确，有清晰的理论依据
- 良好（80-89分）：映射模式选择基本正确，有基本的理论依据
- 及格（60-79分）：映射模式选择有部分错误，理论依据不足
- 不及格（<60分）：映射模式选择错误或无理论依据

**检查项**：
- [ ] 模式选择正确（7分）：根据依赖关系选择正确的映射模式
- [ ] 理论依据（3分）：说明为何选择该模式

**映射模式说明**：
- O/C（上游/下游）：有明确的依赖方向
- D + ACL（防腐层）：集成外部系统或遗留系统
- PL（发布语言）：多个上下文需要共享信息
- CF（共享内核）：多个上下文有共同的核心概念
- SC（独占客户）：为特定大客户定制功能
- OH（开放主机）：提供公共服务

**扣分项**：
- 模式选择错误：O/C 和 ACL 混淆扣 3 分/处
- 无理论依据：未说明为何选择该模式扣 2 分/处

---

### 3.2 防腐层设计（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：防腐层需求识别完整，实现正确，转换逻辑清晰
- 良好（80-89分）：防腐层需求识别基本完整，实现基本正确
- 及格（60-79分）：防腐层需求识别有部分缺失，实现有部分问题
- 不及格（<60分）：防腐层需求识别严重缺失或实现错误

**检查项**：
- [ ] 需求识别（4分）：集成外部系统或遗留系统时使用防腐层
- [ ] 实现正确（4分）：转换外部模型为领域模型，不直接使用外部模型
- [ ] 转换逻辑清晰（2分）：转换逻辑描述清晰

**扣分项**：
- 识别缺失：需要防腐但未设计扣 3 分/处
- 实现错误：直接使用外部模型扣 3 分/处
- 逻辑模糊：转换逻辑不清晰扣 1 分/处

---

### 3.3 集成方式选择（10 分）

**满分**：10 分

**评分标准**：
- 优秀（90-100分）：集成方式选择完全正确，符合实时性要求
- 良好（80-89分）：集成方式选择基本正确
- 及格（60-79分）：集成方式选择有部分错误
- 不及格（<60分）：集成方式选择错误

**检查项**：
- [ ] 方式选择正确（7分）：根据实时性要求选择正确的集成方式
- [ ] 说明充分（3分）：说明为何选择该方式

**集成方式说明**：
- 同步调用：需要实时响应（实时反馈，耦合度高）
- 异步事件：可以异步处理（解耦，最终一致性）
- 消息队列：解耦和削峰（高可靠性，复杂度高）

**扣分项**：
- 方式选择错误：同步/异步选择错误扣 4 分/处
- 说明缺失：无说明扣 2 分/处

---

## 快速评分表

| 检查项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| **业务能力分析** | | | |
| 能力格式正确 | 5 | __ | "动词+名词"格式 |
| 能力完整性 | 3 | __ | 覆盖核心能力 |
| 能力语义清晰 | 2 | __ | 表达清晰 |
| 相互独立 | 3 | __ | 能力不重叠 |
| 完全穷尽 | 3 | __ | 覆盖所有功能 |
| 可独立交付 | 2 | __ | 独立开发部署 |
| 单一职责 | 2 | __ | 只做一件事 |
| 按业务领域分组 | 3 | __ | 用户/会员/支付域 |
| 按数据所有权分组 | 2 | __ | 数据所有者分组 |
| 团队映射明确 | 3 | __ | 负责团队明确 |
| 团队规模合理 | 2 | __ | 3-7人 |
| **限界上下文划分** | | | |
| 语言一致性 | 3 | __ | 术语统一 |
| 数据所有权 | 4 | __ | 一个所有者 |
| 独立变更 | 4 | __ | 独立修改部署 |
| 事务边界 | 4 | __ | 一致性在边界内 |
| 从能力组推导 | 5 | __ | 能力组→上下文 |
| 命名符合规范 | 5 | __ | "领域+Context" |
| 数量合理 | 5 | __ | 3-8个 |
| 领域类型正确 | 5 | __ | 核心/支撑/通用 |
| 能力边界=团队边界 | 3 | __ | 康威定律 |
| 沟通模式=集成模式 | 2 | __ | 康威定律 |
| **上下文映射** | | | |
| 模式选择正确 | 7 | __ | O/C/ACL/PL等 |
| 理论依据 | 3 | __ | 说明选择原因 |
| 防腐层识别 | 4 | __ | 外部系统识别 |
| 防腐层实现 | 4 | __ | 转换外部模型 |
| 转换逻辑清晰 | 2 | __ | 逻辑描述清晰 |
| 集成方式正确 | 7 | __ | 同步/异步正确 |
| 集成方式说明 | 3 | __ | 说明选择原因 |
| **总计** | 100 | __ | |

---

## 及格标准

- **章节及格线**：60 分
- **优秀线**：80 分
- **核心项必须通过**：
  - 能力格式正确 ≥ 3 分
  - 语言一致性 ≥ 2 分
  - 数据所有权 ≥ 3 分
  - 模式选择正确 ≥ 5 分

---

## 评分示例

### 优秀示例（90 分）

**场景**：会员订阅系统

**评分过程**：
1. 业务能力分析：28/30 分
   - 能力识别：10/10 分（所有能力使用"动词+名词"格式，无遗漏）
   - MECE 分解：9/10 分（基本相互独立，完全穷尽，扣1分因为有少量重叠）
   - 分组与团队映射：9/10 分（分组合理，团队映射清晰，扣1分因为有一个团队规模8人略大）

2. 限界上下文划分：36/40 分
   - 边界识别：14/15 分（边界清晰，扣1分因为有一个事务跨边界）
   - 识别与命名：10/10 分（从能力组正确推导，命名完全符合规范）
   - 数量与类型：9/10 分（6个上下文合理，扣1分因为有一个支撑域误标为核心域）
   - 康威定律：3/5 分（基本遵循，扣2分因为有两个能力边界与团队边界不一致）

3. 上下文映射：26/30 分
   - 模式选择：9/10 分（模式选择正确，扣1分因为理论依据说明不够充分）
   - 防腐层：9/10 分（防腐层识别完整，扣1分因为转换逻辑描述略模糊）
   - 集成方式：8/10 分（集成方式基本正确，扣2分因为有一处应该用异步却用了同步）

**总分**：90/100 分（优秀）

**改进建议**：
1. 解决能力重叠问题
2. 调整团队规模到 3-7 人
3. 避免事务跨边界
4. 修正领域类型标注
5. 调整能力边界与团队边界一致
6. 补充理论依据说明
7. 优化集成方式选择

---

## 原则追溯

本评分标准基于以下原则：
- bounded-context.md 1.1-1.4：业务能力分析原则
- bounded-context.md 2.1-2.3：限界上下文划分原则
- bounded-context.md 3.1-3.3：上下文映射原则
- bounded-context.md 4.1：上下文命名原则

---

## 检查清单对应

本评分标准与 chapter-01-checklist.md 对应：
- 业务能力分析 → 检查清单第 1-2 节
- 限界上下文划分 → 检查清单第 3 节
- 上下文映射 → 检查清单第 4-5 节
