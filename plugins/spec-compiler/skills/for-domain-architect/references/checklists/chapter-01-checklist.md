# 第一章检查清单：限界上下文设计

## 使用说明
- **何时使用**：完成第一章（限界上下文）设计后
- **预计耗时**：5-10 分钟
- **通过标准**：所有核心项检查通过

---

## 核心检查项

### 1. 业务能力分析

#### 能力识别
- [ ] 所有业务能力已使用"动词+名词"格式识别
  - 示例：管理会员订阅、发放点券、处理支付
- [ ] 能力定义清晰，不重叠
  - 验证：检查是否有重复或相似的能力

#### 能力分解
- [ ] 能力分解遵循 MECE 原则
  - 相互独立：能力之间不重叠
  - 完全穷尽：覆盖所有业务功能
  - 可独立交付：一个能力可独立开发和部署
  - 单一职责：一个能力只做一件事
- [ ] 能力分组合理
  - 按业务领域分组：用户域、会员域、支付域等
  - 按数据所有权分组：拥有相同数据的能力归为一组

#### 团队映射
- [ ] 每个能力组都有明确的负责团队
- [ ] 团队规模合理（3-7 人）
  - 验证：检查能力-团队映射表

---

### 2. 领域类型识别

- [ ] 所有领域已标注类型
  - 核心域：竞争力所在，差异化（80% 精力）
  - 支撑域：必要但非差异化（够用就好）
  - 通用域：可直接采购/外包（直接购买）
  - 泛化域：无特殊规则（最小投入）
- [ ] 投入策略与类型匹配
  - 验证：核心域是否有足够的资源投入

---

### 3. 限界上下文划分

#### 上下文边界
- [ ] 上下文边界清晰
  - 验证问题：这个上下文的职责是什么？
- [ ] 上下文内部语言一致
  - 验证问题："会员"在这里的含义一致吗？
- [ ] 数据所有权明确
  - 验证问题："会员数据"归谁所有？
- [ ] 可独立变更
  - 验证问题：改这个上下文不影响其他？
- [ ] 事务边界在上下文内
  - 验证问题：事务能在这个边界内完成？

#### 上下文识别
- [ ] 从能力组推导限界上下文
  - 验证：每个上下文对应一个或多个相关能力组
- [ ] 上下文命名符合规范
  - 格式：核心领域 + Context
  - 示例：Membership Context、Coupon Context

---

### 4. 上下文映射

#### 映射模式选择
- [ ] 上下文间关系已定义
- [ ] 集成模式已选择
  - O/C（上游/下游）：有明确的依赖方向
  - D + ACL（防腐层）：集成外部系统或遗留系统
  - PL（发布语言）：多个上下文需要共享信息
  - CF（共享内核）：多个上下文有共同的核心概念
  - SC（独占客户）：为特定大客户定制功能
  - OH（开放主机）：提供公共服务

#### 防腐层
- [ ] 防腐层需求已识别
  - 验证：集成外部系统或遗留系统时使用防腐层
- [ ] 防腐层实现正确
  - 转换外部模型为领域模型
  - 不直接使用外部模型

#### 集成方式
- [ ] 集成方式根据实时性要求选择
  - 同步调用：需要实时响应
  - 异步事件：可以异步处理
  - 消息队列：解耦和削峰

---

### 5. 康威定律应用

- [ ] 能力边界 = 团队边界
  - 验证：一个能力边界对应一个团队
- [ ] 团队间沟通模式 = 系统间集成模式
  - 验证：团队沟通方式是否反映在系统架构上

---

## 快速验证

### 关键指标
- [ ] 能力数量：5-15 个业务能力
- [ ] 上下文数量：3-8 个限界上下文
- [ ] 团队覆盖：每个上下文都有负责团队
- [ ] 类型分布：核心域不超过 30%

### 设计验证
- [ ] 画出了上下文映射图
- [ ] 标注了上下文间关系
- [ ] 标注了领域类型
- [ ] 定义了集成方式

---

## 常见问题

**Q: 如何判断一个能力是否应该独立？**
A: 使用 MECE 原则验证。如果一个能力可以独立开发、部署、交付，且与其他能力不重叠，就应该独立。

**Q: 核心域和支撑域如何区分？**
A: 核心域是企业的竞争力所在，需要差异化；支撑域是必要的但不是竞争重点。

**Q: 什么时候需要使用防腐层？**
A: 集成外部系统或遗留系统时，必须使用防腐层来隔离外部模型和领域模型。

**Q: 上下文多大合适？**
A: 一个上下文应该对应一个团队的能力范围，通常 3-7 人负责一个上下文。

**Q: 如何验证上下文边界是否合理？**
A: 问三个问题：1) 语言是否一致？2) 能否独立变更？3) 事务能否在边界内完成？

---

## 原则追溯

本检查清单基于以下原则：
- `bounded-context.md` 1.1-1.4：业务能力分析原则
- `bounded-context.md` 2.1-2.3：限界上下文划分原则
- `bounded-context.md` 3.1-3.3：上下文映射原则
- `bounded-context.md` 4.1：上下文命名原则
