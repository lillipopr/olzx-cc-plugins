# 战术设计检查清单

> **对应评分标准**：[tactical-scoring.md](../scoring/02-tactical-scoring.md)
> **满分**：100 分
> **及格分**：60 分
> **权重**：30%（最高权重）

---

## 使用说明

在完成战术设计后，逐项检查本清单。根据每个检查项的评分标准计算得分。

**评分方式**：
- 完全符合：满分
- 基本符合：60-80% 分数
- 不符合：0 分

---

## 一、聚合设计（25 分）

### 1.1 聚合识别（10 分）

- [ ] **聚合根正确**（5 分）
  - [ ] 聚合根是实体的收敛中心
  - [ ] 聚合根识别正确
  - [ ] 聚合根承载不变量

- [ ] **边界合理**（5 分）
  - [ ] 聚合边界由不变量决定
  - [ ] 边界合理，不过大也不过小
  - [ ] 聚合内事务一致性

### 1.2 聚合图（8 分）

- [ ] **结构清晰**（4 分）
  - [ ] 聚合层级结构清晰
  - [ ] 层级不超过 3 层
  - [ ] 结构一目了然

- [ ] **类型标注**（2 分）
  - [ ] 实体/值类型类型正确标注
  - [ ] 标注清晰

- [ ] **关系明确**（2 分）
  - [ ] 聚合内关系明确
  - [ ] 组合关系清晰

### 1.3 聚合间引用（7 分）

- [ ] **引用方式正确**（4 分）
  - [ ] 使用 ID 引用而非对象引用
  - [ ] 无跨聚合对象引用
  - [ ] 引用方式符合 DDD 原则

- [ ] **引用类型合理**（3 分）
  - [ ] 直接引用/事件驱动选择合理
  - [ ] 同步/异步选择合理
  - [ ] 引用类型有依据

---

## 二、实体与值对象（20 分）

### 2.1 聚合根列表（6 分）

- [ ] **唯一标识**（2 分）
  - [ ] 每个聚合根都有唯一标识
  - [ ] 标识类型合理

- [ ] **生命周期**（2 分）
  - [ ] 生命周期定义清晰
  - [ ] 包含创建→变化→终结

- [ ] **不变量**（2 分）
  - [ ] 承载的不变量已列出
  - [ ] 不变量与聚合对应

### 2.2 实体列表（5 分）

- [ ] **三条件筛选**（3 分）
  - [ ] 每个实体满足三个条件
  - [ ] 有唯一ID
  - [ ] 有生命周期
  - [ ] 有状态转移

- [ ] **所属聚合**（2 分）
  - [ ] 每个实体都有明确的所属聚合
  - [ ] 一个实体只属于一个聚合

### 2.3 值对象列表（5 分）

- [ ] **不变性**（3 分）
  - [ ] 值对象的不变性已说明
  - [ ] 强调不可替换

- [ ] **所属实体**（2 分）
  - [ ] 每个值对象都有所属实体
  - [ ] 归属关系清晰

### 2.4 实体 vs 值对象判断依据（4 分）

- [ ] **判断标准明确**（2 分）
  - [ ] 三个判断条件已列出
  - [ ] 标准清晰可执行

- [ ] **实际应用**（2 分）
  - [ ] 所有实体都符合判断标准
  - [ ] 无误判

---

## 三、领域事件（15 分）

### 3.1 事件列表（8 分）

- [ ] **事件完整性**（3 分）
  - [ ] 重要状态变化都有对应事件
  - [ ] 事件覆盖核心业务

- [ ] **命名规范**（2 分）
  - [ ] 事件名称使用过去式动词
  - [ ] 命名符合 DDD 约定

- [ ] **触发条件明确**（3 分）
  - [ ] 每个事件触发条件明确
  - [ ] 条件描述清晰

### 3.2 携带数据（4 分）

- [ ] **数据完整**（2 分）
  - [ ] 携带必要的数据字段
  - [ ] 数据字段充分

- [ ] **不可变性**（2 分）
  - [ ] 携带的数据不可变
  - [ ] 数据为值对象

### 3.3 订阅方（3 分）

- [ ] **订阅方明确**（2 分）
  - [ ] 每个事件都有明确的订阅方
  - [ ] 订阅方识别正确

- [ ] **处理逻辑**（1 分）
  - [ ] 订阅方的处理逻辑已说明
  - [ ] 逻辑描述清晰

---

## 四、领域服务（10 分）

### 4.1 领域服务识别（4 分）

- [ ] **识别正确**（4 分）
  - [ ] 需要领域服务的地方都识别出来了
  - [ ] 符合领域服务判断标准

**判断标准**：
- 涉及多个聚合根的协作 → 需要领域服务
- 不属于任何特定实体的行为 → 需要领域服务
- 需要访问领域外服务 → 需要领域服务

### 4.2 领域服务列表（6 分）

- [ ] **职责清晰**（3 分）
  - [ ] 每个领域服务职责清晰
  - [ ] 职责单一

- [ ] **涉及的聚合**（2 分）
  - [ ] 涉及的聚合已列出
  - [ ] 列表完整

- [ ] **依赖明确**（1 分）
  - [ ] 外部依赖已明确
  - [ ] 依赖描述清晰

---

## 五、仓储接口（15 分）

### 5.1 仓储定义（3 分）

- [ ] **一一对应**（3 分）
  - [ ] 每个聚合根对应一个仓储
  - [ ] 无一对多情况

### 5.2 仓储接口列表（6 分）

- [ ] **核心方法**（3 分）
  - [ ] 包含 findById、save、delete
  - [ ] 方法签名完整

- [ ] **查询方法**（3 分）
  - [ ] 包含必要的查询方法
  - [ ] 查询方法设计合理

### 5.3 仓储接口定义模板（6 分）

- [ ] **类型安全**（2 分）
  - [ ] 接口定义类型安全
  - [ ] 泛型使用正确

- [ ] **返回值明确**（2 分）
  - [ ] 返回值类型明确
  - [ ] Optional/nullable 处理正确

- [ ] **异常处理**（2 分）
  - [ ] 异常处理已考虑
  - [ ] 异常类型已定义

---

## 六、应用层接口（15 分）

### 6.1 用户行为（7 分）

- [ ] **行为完整性**（3 分）
  - [ ] 覆盖所有用户操作
  - [ ] 无遗漏

- [ ] **触发方明确**（2 分）
  - [ ] 触发方明确（用户/外部系统）
  - [ ] 触发方式清晰

- [ ] **应用服务对应**（2 分）
  - [ ] 每个行为都有对应的应用服务
  - [ ] 一一对应

### 6.2 系统行为（7 分）

- [ ] **行为完整性**（3 分）
  - [ ] 覆盖所有系统行为
  - [ ] 定时任务、事件监听都已列出

- [ ] **触发方式**（2 分）
  - [ ] 触发方式明确（定时任务/事件监听）
  - [ ] 触发条件清晰

- [ ] **实现方式**（2 分）
  - [ ] 实现方式已说明
  - [ ] 实现细节可理解

### 6.3 应用层接口定义模板（1 分）

- [ ] **接口定义**（1 分）
  - [ ] 接口定义格式正确
  - [ ] TypeScript 接口规范

---

## 评分汇总

| 维度 | 满分 | 得分 | 得分率 |
|------|------|------|--------|
| 聚合设计 | 25 |  |  |
| 实体与值对象 | 20 |  |  |
| 领域事件 | 15 |  |  |
| 领域服务 | 10 |  |  |
| 仓储接口 | 15 |  |  |
| 应用层接口 | 15 |  |  |
| **总分** | **100** | **__** | **__%** |

### 评分结果

- [ ] **≥ 90 分**：优秀，可以交付
- [ ] **85-89 分**：良好，建议微调
- [ ] **75-84 分**：合格，建议改进
- [ ] **60-74 分**：及格，必须改进
- [ ] **< 60 分**：不合格，必须重新设计

### 改进建议

根据低分项，参考 [tactical-scoring.md](../scoring/02-tactical-scoring.md) 中的改进建议进行优化。

**重点关注**（权重最高）：
- 聚合设计（25 分）
- 实体与值对象（20 分）
