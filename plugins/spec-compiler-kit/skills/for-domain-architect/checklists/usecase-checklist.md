# 用例设计检查清单

## 使用说明

本检查清单用于验证《领域设计文档》第四部分（用例设计）的完整性和质量。

---

## 正向用例检查

### 完整性

- [ ] 核心业务流程都有正向用例覆盖
- [ ] 每个主要状态转移都有正向用例
- [ ] 正向用例数量合理（不少于 3 个）

### 格式规范

每个正向用例必须包含：

- [ ] 用例名称（Case-XX）
- [ ] 前置条件（Given）
  - [ ] 系统状态明确
  - [ ] 数据状态明确
  - [ ] 外部依赖状态明确
- [ ] 触发行为（When）
  - [ ] 行为描述清晰
  - [ ] 触发方明确（用户/系统）
- [ ] 预期结果（Then）
  - [ ] 状态变化明确
  - [ ] 输出结果明确
  - [ ] 副作用明确
- [ ] 约束/不变量
  - [ ] 覆盖的不变量已列出
- [ ] 各端验证方式
  - [ ] 后端验证方式明确
  - [ ] iOS 验证方式明确
  - [ ] 前端验证方式明确

### 质量检查

- [ ] 正向用例覆盖所有核心 Happy Path
- [ ] 用例描述清晰无歧义
- [ ] 用例可直接转化为测试代码

---

## Bad Case 检查

### 完整性

- [ ] 每个禁止态都有对应的 Bad Case
- [ ] Bad Case 数量与禁止态数量一致
- [ ] 每个违反不变量的情况都有 Bad Case

### 格式规范

每个 Bad Case 必须包含：

- [ ] 用例名称（Case-BX）
- [ ] 前置条件（Given）
- [ ] 触发行为（When）
- [ ] 预期结果（Then）
  - [ ] 状态变化：无（或回滚）
  - [ ] 输出结果：拒绝 + 错误信息
  - [ ] 副作用：无
- [ ] 违反的不变量
  - [ ] 违反的不变量 ID 已列出
- [ ] 各端验证方式

### 质量检查

- [ ] Bad Case 覆盖所有禁止态
- [ ] 错误信息清晰明确
- [ ] 用例可直接转化为测试代码

---

## 边界用例检查

### 完整性

- [ ] 零值情况已覆盖
- [ ] 最大值情况已覆盖
- [ ] 最小值情况已覆盖
- [ ] 空集合情况已覆盖

### 格式规范

每个边界用例必须包含：

- [ ] 用例名称（Case-EX）
- [ ] 前置条件（Given）
  - [ ] 边界条件明确
- [ ] 触发行为（When）
- [ ] 预期结果（Then）

### 质量检查

- [ ] 边界用例覆盖所有临界值
- [ ] 边界条件定义合理

---

## 高级用例检查（可选）

### 回放用例

- [ ] 历史结果回放用例已设计（如需要）
- [ ] 回放验证逻辑明确

### 规则升级用例

- [ ] 规则升级兼容性用例已设计（如需要）
- [ ] 版本差异可解释

### 可解释性用例

- [ ] 结果可追溯性用例已设计（如需要）
- [ ] 追溯逻辑明确

---

## 用例覆盖矩阵检查

### 完整性

- [ ] 覆盖矩阵包含所有用例
- [ ] 每个用例都有类型标注
- [ ] 每个用例都列出了覆盖的不变量
- [ ] 每个用例都列出了覆盖的状态转移
- [ ] 每个用例都有优先级标注

### 覆盖验证

- [ ] 每个不变量至少有一个用例覆盖
- [ ] 每个状态转移至少有一个用例覆盖
- [ ] 每个禁止态至少有一个 Bad Case
- [ ] P0 用例 100% 覆盖

### 质量检查

- [ ] 覆盖矩阵格式正确
- [ ] 覆盖关系清晰

---

## 用例优先级检查

### 优先级定义

- [ ] 优先级定义清晰（P0/P1/P2）
- [ ] 优先级比例合理（P0 <= 30%, P1 <= 40%, P2 <= 30%）

### 优先级分配

- [ ] P0 用例：核心业务流程
- [ ] P1 用例：重要边界条件
- [ ] P2 用例：边缘场景

### 依赖关系

- [ ] 用例依赖关系已明确
- [ ] 实现顺序合理

---

## 跨端一致性检查

### 完整性

- [ ] 每个用例都有各端验证方式
- [ ] 后端验证方式明确
- [ ] iOS 验证方式明确
- [ ] 前端验证方式明确（或标注依赖后端）

### 格式规范

- [ ] 验证方式表格式正确
- [ ] 测试文件名明确

### 质量检查

- [ ] 用例数据在各端保持一致
- [ ] 预期结果在各端保持一致

---

## 可测试性检查

### 用例质量

- [ ] 用例描述清晰无歧义
- [ ] 用例可以直接转化为自动化测试
- [ ] 用例前置条件明确
- [ ] 用例预期结果明确

### 测试覆盖

- [ ] 用例覆盖了所有关键场景
- [ ] 用例覆盖了所有风险点
- [ ] 用例覆盖了所有边界条件

---

## 闸口检查

在完成设计前，必须确认：

- [ ] 每个不变量至少有一个用例覆盖
- [ ] 每个状态转移至少有一个用例覆盖
- [ ] 每个禁止态至少有一个 Bad Case
- [ ] P0 用例 100% 覆盖
- [ ] 用例可直接转化为自动化测试
- [ ] 用例覆盖矩阵完整
- [ ] 用例优先级分配合理（P0 <= 30%）

---

## 常见问题检查

### ❌ 用例覆盖不完整

- [ ] 没有遗漏核心业务流程
- [ ] 没有遗漏关键状态转移
- [ ] 没有遗漏禁止态

### ❌ 用例不可测试

- [ ] 用例描述足够具体
- [ ] 前置条件明确
- [ ] 预期结果明确

### ❌ 用例优先级不合理

- [ ] P0 用例不超过 30%
- [ ] 核心流程都标记为 P0

---

**检查完成** → 领域设计文档完整
